require "lunit"
require "lib.util"

module( "util_testcase", package.seeall, lunit.testcase )

function test_split_util_for_comma()
  local str = "a,b,c"
  assert_table( str:split(","), "split() should return a table" )
  assert_equal( "a", str:split(",")[1], "split() should split \"a,b,c\" into {\"a\", \"b\", \"c\"}" )
  assert_equal( "b", str:split(",")[2], "split() should split \"a,b,c\" into {\"a\", \"b\", \"c\"}" )
  assert_equal( "c", str:split(",")[3], "split() should split \"a,b,c\" into {\"a\", \"b\", \"c\"}" )
end

function test_split_util_for_dot()
  local str = "a.b.c"
  assert_table( str:split("%."), "split() should return a table" )
  assert_equal( "a", str:split("%.")[1], "split() should split \"a.b.c\" into {\"a\", \"b\", \"c\"}" )
end

function test_get_network_prefix_function()
  assert_equal( 16908288, get_network_prefix("1.2.3.4", 16) )
end

function test_number_to_ip_function()
  assert_equal( "1.2.0.0", number_to_ip(16908288) )
end
