require "lunit"
local Outcome = require "lib.Outcome"

module( "Outcome_testcase", package.seeall, lunit.testcase )

function test_new_function()
  assert_not_nil( Outcome.new("root", "gain root access of the target directly") )
end

function test_lookup_method()
  Outcome.outcome_name_map = {}
  Outcome.all = {}
  Outcome.new("root", "gain root access of the target directly")
  assert_equal( "gain root access of the target directly", Outcome.lookup("root").description)
end

function test_eval_function()
  Outcome.outcome_name_map = {}
  Outcome.all = {}
  outcome = Outcome.new("root", "gain root access of the target directly")
  assert_error( "should raise error if eval() not implemented", outcome.eval )
  outcome.eval = function (host)
    return 1
  end
  assert_equal( 1, outcome.eval(nil) )
end
