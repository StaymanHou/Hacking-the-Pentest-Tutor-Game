require "lunit"
local NetworkInterface = require "lib.NetworkInterface"
local Network = require "lib.Network"

module( "NetworkInterface_testcase", package.seeall, lunit.testcase )

function test_new_method()
  assert_not_nil( NetworkInterface.new() )
end

function test_assign_method()
  network_interface = NetworkInterface.new()
  network = Network.new("192.168.1.0/24")
  network_interface:assign(network, "192.168.1.100")
  assert_equal( network:get_cidr(), network_interface.network:get_cidr() )
  assert_equal( "192.168.1.100", network_interface.ip )
  assert_equal( 1, #(network.connected_network_interfaces) )
  assert_equal( network_interface, network.connected_network_interfaces[1] )
end
